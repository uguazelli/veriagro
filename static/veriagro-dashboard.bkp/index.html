<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeriAgro Dashboard</title>
    <link rel="stylesheet" href="/static/veriagro-dashboard/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>

<body class="font-sans">
    <div id="login-page" class="flex items-center justify-center h-screen bg-gray-900">
        <div class="w-full max-w-md p-8 space-y-8 card rounded-xl shadow-2xl">
            <h2 class="text-4xl font-bold text-center text-white">
                <i class="fas fa-leaf mr-2 text-green-400"></i>VeriAgro
            </h2>
            <p class="text-center text-gray-400">Sign in to manage your IoT farm</p>
            <form id="login-form" class="space-y-6">
                <input id="email" name="email" type="email" required placeholder="user@example.com"
                    class="w-full p-3 input-field rounded-md">
                <input id="password" name="password" type="password" required placeholder="••••••••"
                    class="w-full p-3 input-field rounded-md">
                <button type="submit" class="w-full px-4 py-3 text-white btn-primary rounded-md">Log In</button>
            </form>
        </div>
    </div>

    <div id="dashboard" class="hidden">
        <!-- Mobile Top Bar -->
        <div class="md:hidden flex items-center justify-between px-4 py-3 bg-gray-900 border-b border-gray-700">
            <button id="toggle-sidebar" class="text-white text-xl">
                <i class="fas fa-bars"></i>
            </button>
            <h1 class="text-white text-xl font-semibold">VeriAgro</h1>
        </div>

        <!-- Desktop Toggle Button -->
        <button id="toggle-sidebar-desktop"
            class="hidden lg:block fixed top-4 left-4 z-40 bg-gray-800 text-white p-2 rounded-full shadow-lg">
            <i class="fas fa-bars"></i>
        </button>

        <div id="sidebar"
            class="sidebar fixed top-0 left-0 h-full w-64 p-4 text-gray-300 transition-transform duration-300 transform md:translate-x-0 -translate-x-full md:block bg-gray-900 z-40">
            <h1 class="text-3xl font-bold text-white mb-8 flex items-center">
                <i class="fas fa-leaf mr-3 text-green-400"></i>VeriAgro
            </h1>
            <nav id="main-nav" class="space-y-3">
                <a href="#users" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-users w-6 mr-3"></i>Users</a>
                <a href="#devices" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-microchip w-6 mr-3"></i>Devices</a>
                <a href="#sensors" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-temperature-high w-6 mr-3"></i>Sensors</a>
                <a href="#sensordata" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-chart-line w-6 mr-3"></i>Sensor Data</a>
                <a href="#topics" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-sitemap w-6 mr-3"></i>Topics</a>
                <a href="#credentials" class="nav-link flex items-center p-3 rounded-lg"><i
                        class="fas fa-key w-6 mr-3"></i>MQTT Credentials</a>
            </nav>
            <button id="logout-button"
                class="absolute bottom-4 left-4 right-4 bg-red-600 hover:bg-red-700 text-white p-3 rounded-lg flex items-center justify-center">
                <i class="fas fa-sign-out-alt w-6 mr-3"></i>Logout
            </button>
        </div>

        <main id="main-content" class="md:ml-64 p-8 mt-16 md:mt-0"></main>
    </div>

    <script type="module" src="/static/veriagro-dashboard/main.js"></script>
    <script>
        const sidebar = document.getElementById('sidebar');
        const mobileToggleBtn = document.getElementById('toggle-sidebar');
        const desktopToggleBtn = document.getElementById('toggle-sidebar-desktop');

        mobileToggleBtn?.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        desktopToggleBtn?.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });

        // Auto-close sidebar on nav click (mobile only)
        document.querySelectorAll('#main-nav .nav-link').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth < 768) {
                    sidebar.classList.add('-translate-x-full');
                }
            });
        });
    </script>
</body>

</html>